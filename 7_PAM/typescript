–°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—â–µ–Ω –ß—Ç 16 –º–∞–π 2019 09:29:32
]0;root@node2:~[?1034h[root@node2 ~]# useradd day night friday
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: useradd [–ø–∞—Ä–∞–º–µ—Ç—Ä—ã] –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨
               useradd -D
               useradd -D [–ø–∞—Ä–∞–º–µ—Ç—Ä—ã]

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
  -b, --base-dir –ë–ê–ó_–ö–ê–¢        –±–∞–∑–æ–≤—ã–π –∫–∞—Ç–∞–ª–æ–≥ –¥–ª—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ –Ω–æ–≤–æ–π
                                —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏
  -c, --comment –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ô     –ø–æ–ª–µ GECOS –Ω–æ–≤–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏
  -d, --home-dir –î–û–ú_–ö–ê–¢        –¥–æ–º–∞—à–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥ –Ω–æ–≤–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏
  -D, --defaults                –ø–æ–∫–∞–∑–∞—Ç—å –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                                –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è useradd
  -e, --expiredate –î–ê–¢–ê_–£–°–¢     –¥–∞—Ç–∞ —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏
  -f, --inactive –ù–ï–ê–ö–¢–ò–í–ù–û–°–¢–¨   –ø–µ—Ä–∏–æ–¥ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è –Ω–æ–≤–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏
  -g, --gid –ì–†–£–ü–ü–ê              –∏–º—è –∏–ª–∏ ID –ø–µ—Ä–≤–∏—á–Ω–æ–π –≥—Ä—É–ø–ø—ã –Ω–æ–≤–æ–π
                                —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏
  -G, --groups –ì–†–£–ü–ü–´           —Å–ø–∏—Å–æ–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –≥—Ä—É–ø–ø –Ω–æ–≤–æ–π
                                —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏
  -h, --help                    –ø–æ–∫–∞–∑–∞—Ç—å –¥–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –∑–∞–∫–æ–Ω—á–∏—Ç—å —Ä–∞–±–æ—Ç—É
  -k, --skel –ö–ê–ë_–®–ê–ë            –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ —Å —à–∞–±–ª–æ–Ω–∞–º–∏
  -K, --key –ö–õ–Æ–ß=–ó–ù–ê–ß–ï–ù–ò–ï       –∑–∞–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                                –∏–∑ /etc/login.defs
  -l, --no-log-init             –Ω–µ –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö lastlog –∏
                                faillog
  -m, --create-home             —Å–æ–∑–¥–∞—Ç—å –¥–æ–º–∞—à–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  -M, --no-create-home          –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–æ–º–∞—à–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  -N, --no-user-group           –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥—Ä—É–ø–ø—É —Å —Ç–µ–º –∂–µ –∏–º–µ–Ω–µ–º —á—Ç–æ –∏ —É
                                –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  -o, --non-unique              —Ä–∞–∑—Ä–µ—à–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å
                                –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–º–∏—Å—è (–Ω–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏) UID
  -p, --password –ü–ê–†–û–õ–¨         –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å –Ω–æ–≤–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏
  -r, --system                  —Å–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—É—é —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å
  -R, --root –ö–ê–¢_CHROOT         –∫–∞—Ç–∞–ª–æ–≥, –≤ –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è chroot
  -s, --shell –û–ë–û–õ–û–ß–ö–ê          —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –æ–±–æ–ª–æ—á–∫–∞ –Ω–æ–≤–æ–π
                                —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏
  -u, --uid UID                 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π ID –Ω–æ–≤–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏
  -U, --user-group              —Å–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É —Å —Ç–µ–º –∂–µ –∏–º–µ–Ω–µ–º —á—Ç–æ –∏ —É
                                –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  -Z, --selinux-user SEUSER     –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ SEUSER –¥–ª—è
                                –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è SELinux

]0;root@node2:~[root@node2 ~]# useradd day night friday[K[K[K[K[K[K[K[K[K[K[K[K
]0;root@node2:~[root@node2 ~]# useradd day night friday[C[K[K[K[K[K[K[K[1Pnight[1Pnight[1Pnight[1Pnight
]0;root@node2:~[root@node2 ~]# useradd night[1Pday night friday[1Pfriday[1Pfriday[1Pfriday[1Pfriday[1Pfriday[1Pfriday[1Pfriday[1Pfriday[1Pfriday[1Pfriday
]0;root@node2:~[root@node2 ~]# "sed -i 's/^PasswordAuthentication.*$/PasswordAuthentication yes /' /etc/ssh/sshd_config[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C 's/^PasswordAuthentication.*$/PasswordAuthentication yes/'[1P /etc/ssh/sshd_config[A 's/^PasswordAuthentication.*$/PasswordAuthentication yes/' [1P/etc/ssh/sshd_config[Ased  's/^PasswordAuthentication.*$/PasswordAuthentication yes/' /[1Petc/ssh/sshd_config[A

#	$OpenBSD: sshd_config,v 1.100 2016/08/15 12:32:04 naddy Exp $

# This is the sshd server system-wide configuration file.  See
# sshd_config(5) for more information.

# This sshd was compiled with PATH=/usr/local/bin:/usr/bin

# The strategy used for options in the default sshd_config shipped with
# OpenSSH is to specify options with their default value where
# possible, but leave them commented.  Uncommented options override the
# default value.

# If you want to change the port on a SELinux system, you have to tell
# SELinux about this change.
# semanage port -a -t ssh_port_t -p tcp #PORTNUMBER
#
#Port 22
#AddressFamily any
#ListenAddress 0.0.0.0
#ListenAddress ::

HostKey /etc/ssh/ssh_host_rsa_key
#HostKey /etc/ssh/ssh_host_dsa_key
HostKey /etc/ssh/ssh_host_ecdsa_key
HostKey /etc/ssh/ssh_host_ed25519_key

# Ciphers and keying
#RekeyLimit default none

# Logging
#SyslogFacility AUTH
SyslogFacility AUTHPRIV
#LogLevel INFO

# Authentication:

#LoginGraceTime 2m
#PermitRootLogin yes
#StrictModes yes
#MaxAuthTries 6
#MaxSessions 10

#PubkeyAuthentication yes

# The default is to check both .ssh/authorized_keys and .ssh/authorized_keys2
# but this is overridden so installations will only check .ssh/authorized_keys
AuthorizedKeysFile	.ssh/authorized_keys

#AuthorizedPrincipalsFile none

#AuthorizedKeysCommand none
#AuthorizedKeysCommandUser nobody

# For this to work you will also need host keys in /etc/ssh/ssh_known_hosts
#HostbasedAuthentication no
# Change to yes if you don't trust ~/.ssh/known_hosts for
# HostbasedAuthentication
#IgnoreUserKnownHosts no
# Don't read the user's ~/.rhosts and ~/.shosts files
#IgnoreRhosts yes

# To disable tunneled clear text passwords, change to no here!
#PasswordAuthentication yes
#PermitEmptyPasswords no
PasswordAuthentication yes

# Change to no to disable s/key passwords
#ChallengeResponseAuthentication yes
ChallengeResponseAuthentication no

# Kerberos options
#KerberosAuthentication no
#KerberosOrLocalPasswd yes
#KerberosTicketCleanup yes
#KerberosGetAFSToken no
#KerberosUseKuserok yes

# GSSAPI options
GSSAPIAuthentication yes
GSSAPICleanupCredentials no
#GSSAPIStrictAcceptorCheck yes
#GSSAPIKeyExchange no
#GSSAPIEnablek5users no

# Set this to 'yes' to enable PAM authentication, account processing,
# and session processing. If this is enabled, PAM authentication will
# be allowed through the ChallengeResponseAuthentication and
# PasswordAuthentication.  Depending on your PAM configuration,
# PAM authentication via ChallengeResponseAuthentication may bypass
# the setting of "PermitRootLogin without-password".
# If you just want the PAM account and session checks to run without
# PAM authentication, then enable this but set PasswordAuthentication
# and ChallengeResponseAuthentication to 'no'.
# WARNING: 'UsePAM no' is not supported in Red Hat Enterprise Linux and may cause several
# problems.
UsePAM yes

#AllowAgentForwarding yes
#AllowTcpForwarding yes
#GatewayPorts no
X11Forwarding yes
#X11DisplayOffset 10
#X11UseLocalhost yes
#PermitTTY yes
#PrintMotd yes
#PrintLastLog yes
#TCPKeepAlive yes
#UseLogin no
#UsePrivilegeSeparation sandbox
#PermitUserEnvironment no
#Compression delayed
#ClientAliveInterval 0
#ClientAliveCountMax 3
#ShowPatchLevel no
#UseDNS yes
#PidFile /var/run/sshd.pid
#MaxStartups 10:30:100
#PermitTunnel no
#ChrootDirectory none
#VersionAddendum none

# no default banner path
#Banner none

# Accept locale-related environment variables
AcceptEnv LANG LC_CTYPE LC_NUMERIC LC_TIME LC_COLLATE LC_MONETARY LC_MESSAGES
AcceptEnv LC_PAPER LC_NAME LC_ADDRESS LC_TELEPHONE LC_MEASUREMENT
AcceptEnv LC_IDENTIFICATION LC_ALL LANGUAGE
AcceptEnv XMODIFIERS

# override default of no subsystems
Subsystem	sftp	/usr/libexec/openssh/sftp-server

# Example of overriding settings on a per-user basis
#Match User anoncvs
#	X11Forwarding no
#	AllowTcpForwarding no
#	PermitTTY no
#	ForceCommand cvs server
]0;root@node2:~[root@node2 ~]# [K[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# cat /etc/ssh/sshd_config | grep PasswordAuthentication.
#[01;31m[KPasswordAuthentication [m[Kyes
[01;31m[KPasswordAuthentication [m[Kyes
# [01;31m[KPasswordAuthentication.[m[K  Depending on your PAM configuration,
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# cat /etc/ssh/sshd_config | grep PasswordAuthentication.[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Csed  's/^PasswordAuthentication.*$/PasswordAuthentication yes/' /etc/ssh/sshd_config[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@ [1@-[1@i
]0;root@node2:~[root@node2 ~]# [K[root@node2 ~]# systemctl restart sshd.servic
Failed to restart sshd.servic.service: Unit not found.
]0;root@node2:~[root@node2 ~]# systemctl restart sshd.servic[K[K[K[K[K[K[K
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# echo "Otus2019"|sudo passwd --stdin day
–ò–∑–º–µ–Ω—è–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è day.
passwd: –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã.
]0;root@node2:~[root@node2 ~]# echo "Otus2019" | sudo passwd --stdin night
–ò–∑–º–µ–Ω—è–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è night.
passwd: –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã.
]0;root@node2:~[root@node2 ~]# echo "Otus2019" | sudo passwd --stdin frida
passwd: –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ –∏–º—è ¬´frida¬ª.
]0;root@node2:~[root@node2 ~]# echo "Otus2019" | sudo passwd --stdin friday
–ò–∑–º–µ–Ω—è–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è friday.
passwd: –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã.
]0;root@node2:~[root@node2 ~]# cat /etc/security/time.conf
# this is an example configuration file for the pam_time module. Its syntax
# was initially based heavily on that of the shadow package (shadow-960129).
#
# the syntax of the lines is as follows:
#
#       services;ttys;users;times
#
# white space is ignored and lines maybe extended with '\\n' (escaped
# newlines). As should be clear from reading these comments,
# text following a '#' is ignored to the end of the line.
#
# the combination of individual users/terminals etc is a logic list
# namely individual tokens that are optionally prefixed with '!' (logical
# not) and separated with '&' (logical and) and '|' (logical or).
#
# services
#	is a logic list of PAM service names that the rule applies to.
#
# ttys
#	is a logic list of terminal names that this rule applies to.
#
# users
#	is a logic list of users or a netgroup of users to whom this
#	rule applies.
#
# NB. For these items the simple wildcard '*' may be used only once.
#
# times
#	the format here is a logic list of day/time-range
#	entries the days are specified by a sequence of two character
#	entries, MoTuSa for example is Monday Tuesday and Saturday. Note
#	that repeated days are unset MoMo = no day, and MoWk = all weekdays
#	bar Monday. The two character combinations accepted are
#
#		Mo Tu We Th Fr Sa Su Wk Wd Al
#
#	the last two being week-end days and all 7 days of the week
#	respectively. As a final example, AlFr means all days except Friday.
#
#	each day/time-range can be prefixed with a '!' to indicate "anything
#	but"
#
#	The time-range part is two 24-hour times HHMM separated by a hyphen
#	indicating the start and finish time (if the finish time is smaller
#	than the start time it is deemed to apply on the following day).
#
# for a rule to be active, ALL of service+ttys+users must be satisfied
# by the applying process.
#

#
# Here is a simple example: running blank on tty* (any ttyXXX device),
# the users 'you' and 'me' are denied service all of the time
#

#blank;tty* & !ttyp*;you|me;!Al0000-2400

# Another silly example, user 'root' is denied xsh access
# from pseudo terminals at the weekend and on mondays.

#xsh;ttyp*;root;!WdMo0000-2400

#
# End of example file.
#
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# cat /etc/security/time.conf[1P /etc/security/time.conf[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1P /etc/security/time.conf[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1P /etc/security/time.conf[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cv /etc/security/time.conf[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Ci /etc/security/time.conf[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C
[?1049h[?1h=[1;24r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[24;1H"/etc/security/time.conf" 65L, 2179C[1;1H# this is an example configuration file for the pam_time module. Its syntax
# was initially based heavily on that of the shadow package (shadow-960129).
#
# the syntax of the lines is as follows:
#
#[7Cservices;ttys;users;times
#
# white space is ignored and lines maybe extended with '\\n' (escaped
# newlines). As should be clear from reading these comments,
# text following a '#' is ignored to the end of the line.
#
# the combination of individual users/terminals etc is a logic list
# namely individual tokens that are optionally prefixed with '!' (logical
# not) and separated with '&' (logical and) and '|' (logical or).
#
# services
#[7Cis a logic list of PAM service names that the rule applies to.
#
# ttys
#[7Cis a logic list of terminal names that this rule applies to.
#
# users
#[7Cis a logic list of users or a netgroup of users to whom this[1;1H[?12l[?25h





















[?25l[1;23r[23;1H
[1;24r[23;1H#[7Crule applies.[24;1H[K[23;1H[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H# NB. For these items the simple wildcard '*' may be used only once.[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H# times[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[7Cthe format here is a logic list of day/time-range[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[7Centries the days are specified by a sequence of two character[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[7Centries, MoTuSa for example is Monday Tuesday and Saturday. Note[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[7Cthat repeated days are unset MoMo = no day, and MoWk = all weekdays[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[7Cbar Monday. The two character combinations accepted are[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[15CMo Tu We Th Fr Sa Su Wk Wd Al[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[7Cthe last two being week-end days and all 7 days of the week[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[7Crespectively. As a final example, AlFr means all days except Friday.[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[7Ceach day/time-range can be prefixed with a '!' to indicate "anything[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[7Cbut"[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[7CThe time-range part is two 24-hour times HHMM separated by a hyphen[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[7Cindicating the start and finish time (if the finish time is smaller[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[7Cthan the start time it is deemed to apply on the following day).[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H# for a rule to be active, ALL of service+ttys+users must be satisfied[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H# by the applying process.[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H# Here is a simple example: running blank on tty* (any ttyXXX device),[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H# the users 'you' and 'me' are denied service all of the time[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#blank;tty* & !ttyp*;you|me;!Al0000-2400[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H# Another silly example, user 'root' is denied xsh access[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H# from pseudo terminals at the weekend and on mondays.[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#xsh;ttyp*;root;!WdMo0000-2400[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H# End of example file.[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H#[?12l[?25h[?25l
[1m-- INSERT --[23;1H[?12l[?25h[m#[?25l[1;23r[23;1H
[1;24r[23;1H[?12l[?25h[?25l[1;23r[1;1H[2M[1;24r[21;1H*;*;day;Al0800-2000
*;*;night;!Al0800-2000
*;*;friday;Fr[?12l[?25h[?25l[1;23r[23;1H
[1;24r[23;1H[?12l[?25h[24;1H[K[23;1H[?25l[?12l[?25h[?25l
Entering Ex mode.  Type "visual" to go to Normal mode.[?12l[?25h
:wq
[?25l"/etc/security/time.conf" "/etc/security/time.conf" 69L, 2237C written
[?1l>[?12l[?25h[?1049l]0;root@node2:~[root@node2 ~]# vi /etc/security/time.conf[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@cat[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C
# this is an example configuration file for the pam_time module. Its syntax
# was initially based heavily on that of the shadow package (shadow-960129).
#
# the syntax of the lines is as follows:
#
#       services;ttys;users;times
#
# white space is ignored and lines maybe extended with '\\n' (escaped
# newlines). As should be clear from reading these comments,
# text following a '#' is ignored to the end of the line.
#
# the combination of individual users/terminals etc is a logic list
# namely individual tokens that are optionally prefixed with '!' (logical
# not) and separated with '&' (logical and) and '|' (logical or).
#
# services
#	is a logic list of PAM service names that the rule applies to.
#
# ttys
#	is a logic list of terminal names that this rule applies to.
#
# users
#	is a logic list of users or a netgroup of users to whom this
#	rule applies.
#
# NB. For these items the simple wildcard '*' may be used only once.
#
# times
#	the format here is a logic list of day/time-range
#	entries the days are specified by a sequence of two character
#	entries, MoTuSa for example is Monday Tuesday and Saturday. Note
#	that repeated days are unset MoMo = no day, and MoWk = all weekdays
#	bar Monday. The two character combinations accepted are
#
#		Mo Tu We Th Fr Sa Su Wk Wd Al
#
#	the last two being week-end days and all 7 days of the week
#	respectively. As a final example, AlFr means all days except Friday.
#
#	each day/time-range can be prefixed with a '!' to indicate "anything
#	but"
#
#	The time-range part is two 24-hour times HHMM separated by a hyphen
#	indicating the start and finish time (if the finish time is smaller
#	than the start time it is deemed to apply on the following day).
#
# for a rule to be active, ALL of service+ttys+users must be satisfied
# by the applying process.
#

#
# Here is a simple example: running blank on tty* (any ttyXXX device),
# the users 'you' and 'me' are denied service all of the time
#

#blank;tty* & !ttyp*;you|me;!Al0000-2400

# Another silly example, user 'root' is denied xsh access
# from pseudo terminals at the weekend and on mondays.

#xsh;ttyp*;root;!WdMo0000-2400

#
# End of example file.
#
*;*;day;Al0800-2000
*;*;night;!Al0800-2000
*;*;friday;Fr

]0;root@node2:~[root@node2 ~]# cat /etc/security/time.conf[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Kvi /etc/pam.d/sshd
[?1049h[?1h=[1;24r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[24;1H"/etc/pam.d/sshd" 20L, 904C[1;1H#%PAM-1.0
auth[7Crequired     pam_sepermit.so
auth[7Csubstack     password-auth
auth[7Cinclude      postlogin
# Used with polkit to reauthorize users in remote sessions
-auth      optional     pam_reauthorize.so prepare
account    required     pam_nologin.so
account    include      password-auth
password   include      password-auth
# pam_selinux.so close should be the first session rule
session    required     pam_selinux.so close
session    required     pam_loginuid.so
# pam_selinux.so open should only be followed by sessions to be executed in the  [14;1Huser context
session    required     pam_selinux.so open env_params
session    required     pam_namespace.so
session    optional     pam_keyinit.so force revoke
session    include      password-auth
session    include      postlogin
# Used with polkit to reauthorize users in remote sessions
-session   optional     pam_reauthorize.so prepare
[1m[34m~                                                                               [23;1H~                                                                               [1;1H[?12l[?25h







[?25l[m[24;1H[1m-- INSERT --[m[24;13H[K[9;1H[?12l[?25h[?25l[10;23r[10;1H[L[1;24r[9;1H[K[10;1Hpassword   include      password-auth[?12l[?25h[9;1H[?25l[10;23r[10;1H[L[1;24r[9;1Haccount    required     pam_nologin.so
account    required     pam_time.so[?12l[?25h[9;36H[?25ld.so[?12l[?25h[?25l<F8>.so[?12l[?25h.so[?25l[9;43H[K[9;43H[?12l[?25h[?25l[9;42H[K[9;42H[?12l[?25h[?25l[9;41H[K[9;41H[?12l[?25h[?25l[9;40H[K[9;40H[?12l[?25h[?25l[9;39H[K[9;39H[?12l[?25h[?25l[9;38H[K[9;38H[?12l[?25h[?25l[9;37H[K[9;37H[?12l[?25h[?25l[9;36H[K[9;36H[?12l[?25h[?25l[9;35H[K[9;35H[?12l[?25h[?25l[9;34H[K[9;34H[?12l[?25h[?25l[9;33H[K[9;33H[?12l[?25h[?25l[9;32H[K[9;32H[?12l[?25h[?25l[9;31H[K[9;31H[?12l[?25h[?25l[9;30H[K[9;30H[?12l[?25h[?25l[9;29H[K[9;29H[?12l[?25h[?25l[9;28H[K[9;28H[?12l[?25h[?25l[9;27H[K[9;27H[?12l[?25h[?25l[9;26H[K[9;26H[?12l[?25h[?25l[9;25H[K[9;25H[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[9;19H[K[9;19H[?12l[?25h[?25l[9;18H[K[9;18H[?12l[?25h[?25l[9;17H[K[9;17H[?12l[?25h[?25l[9;16H[K[9;16H[?12l[?25h[?25l[9;15H[K[9;15H[?12l[?25h[?25l[9;14H[K[9;14H[?12l[?25h[?25l[9;13H[K[9;13H[?12l[?25h[?25l[9;12H[K[9;12H[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[9;7H[K[9;7H[?12l[?25h[?25l[9;6H[K[9;6H[?12l[?25h[?25l[9;5H[K[9;5H[?12l[?25h[?25l[9;4H[K[9;4H[?12l[?25h[?25l[9;3H[K[9;3H[?12l[?25h[?25l[9;2H[K[9;2H[?12l[?25h[?25l[9;1H[K[9;1H[?12l[?25h[?25l[8;23r[23;1H
[1;24r[8;1Haccount    include      password-auth[23;1H[1m[34m~                                                                               [8;38H[?12l[?25h[?25l[m<F2>[?12l[?25h[?25l[9;23r[9;1H[L[1;24r[9;1H[?12l[?25h[?25l[8;23r[23;1H
[1;24r[8;1Haccount    include      password-auth<F2>[23;1H[1m[34m~                                                                               [8;42H[?12l[?25h[?25l[m[8;41H[K[8;41H[?12l[?25h[?25l[8;40H[K[8;40H[?12l[?25h[?25l[8;39H[K[8;39H[?12l[?25h[?25l[8;38H[K[8;38H[?12l[?25h[?25l[8;37H[K[8;37H[?12l[?25h[?25l[8;36H[K[8;36H[?12l[?25h[?25l[8;35H[K[8;35H[?12l[?25h[?25l[8;34H[K[8;34H[?12l[?25h[?25l[8;33H[K[8;33H[?12l[?25h[?25l[8;32H[K[8;32H[?12l[?25h[?25l[8;31H[K[8;31H[?12l[?25h[?25l[8;30H[K[8;30H[?12l[?25h[?25l[8;29H[K[8;29H[?12l[?25h[?25l[8;28H[K[8;28H[?12l[?25h[?25l[8;27H[K[8;27H[?12l[?25h[?25l[8;26H[K[8;26H[?12l[?25h[?25l[8;25H[K[8;25H[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[8;18H[K[8;18H[?12l[?25h[?25l[8;17H[K[8;17H[?12l[?25h[?25l[8;16H[K[8;16H[?12l[?25h[?25l[8;15H[K[8;15H[?12l[?25h[?25l[8;14H[K[8;14H[?12l[?25h[?25l[8;13H[K[8;13H[?12l[?25h[?25l[8;12H[K[8;12H[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[8;7H[K[8;7H[?12l[?25h[?25l[8;6H[K[8;6H[?12l[?25h[?25l[8;5H[K[8;5H[?12l[?25h[?25l[8;4H[K[8;4H[?12l[?25h[?25l[8;3H[K[8;3H[?12l[?25h[?25l[8;2H[K[8;2H[?12l[?25h[?25l[8;1H[K[8;1H[?12l[?25h[?25l[7;23r[23;1H
[1;24r[7;1Haccount    required     pam_nologin.so[23;1H[1m[34m~                                                                               [7;39H[?12l[?25h[8;36H[9;38H[8;36H[?25l[9;23r[m[9;1H[L[1;24r[9;1H[?12l[?25h[?25laccount    include      password-auth[?12l[?25h[24;1H[K[9;37H[?25l[?12l[?25h[?25l[24;1HEntering Ex mode.  Type "visual" to go to Normal mode.[?12l[?25h
:wq
[?25l"/etc/pam.d/sshd" "/etc/pam.d/sshd" 21L, 940C written
[?1l>[?12l[?25h[?1049l]0;root@node2:~[root@node2 ~]# ncat -l -p 80
bash: ncat: –∫–æ–º–∞–Ω–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
]0;root@node2:~[root@node2 ~]# yum install ncat
–ó–∞–≥—Ä—É–∂–µ–Ω—ã –º–æ–¥—É–ª–∏: fastestmirror
Determining fastest mirrors
epel/x86_64/metalink                                     |  23 kB     00:00     
 * base: mirror.reconn.ru
 * epel: ftp.uni-bayreuth.de
 * extras: mirror.reconn.ru
 * updates: dedic.sh
base                                                     | 3.6 kB     00:00     
centos-gluster41                                         | 2.9 kB     00:00     
centos-openshift-origin                                  | 2.9 kB     00:00     
docker-ce-stable                                         | 3.5 kB     00:00     
epel                                                     | 4.7 kB     00:00     
extras                                                   | 3.4 kB     00:00     
postgrespro-ent-10                                       | 2.9 kB     00:00     
updates                                                  | 3.4 kB     00:00     
(1/6): epel/x86_64/updateinfo                              | 1.0 MB   00:00     
(3/6): docker-ce-stable/x8 7% [=                ]  0.0 B/s | 1.0 MB   --:-- ETA (2/6): docker-ce-stable/x86_64/primary_db                  |  28 kB   00:00     
(3/6): extras/7/x86_64/primary_db                          | 201 kB   00:00     
(5/6): epel/x86_64/primary 15% [==              ] 1.2 MB/s | 2.0 MB   00:09 ETA (4/6): centos-gluster41/7/x86_64/primary_db                | 115 kB   00:00     
(6/6): updates/7/x86_64/pr 25% [====            ] 1.3 MB/s | 3.4 MB   00:07 ETA (5/6): epel/x86_64/primary 33% [=====           ] 1.4 MB/s | 4.4 MB   00:06 ETA (5/6): epel/x86_64/primary 35% [=====-          ] 1.4 MB/s | 4.7 MB   00:05 ETA (5/6): epel/x86_64/primary 36% [=====-          ] 1.3 MB/s | 4.7 MB   00:06 ETA (6/6): updates/7/x86_64/pr 36% [=====-          ] 1.2 MB/s | 4.8 MB   00:06 ETA (6/6): updates/7/x86_64/pr 40% [======          ] 1.2 MB/s | 5.3 MB   00:06 ETA (6/6): updates/7/x86_64/pr 49% [=======-        ] 1.4 MB/s | 6.4 MB   00:04 ETA (6/6): updates/7/x86_64/pr 58% [=========       ] 1.5 MB/s | 7.6 MB   00:03 ETA (5/6): epel/x86_64/primary 64% [==========      ] 1.6 MB/s | 8.3 MB   00:02 ETA (5/6): epel/x86_64/primary 72% [===========-    ] 1.7 MB/s | 9.4 MB   00:02 ETA (5/6): epel/x86_64/primary 83% [=============   ] 1.9 MB/s |  11 MB   00:01 ETA (5/6): updates/7/x86_64/primary_db                         | 5.0 MB   00:04     
(6/6): epel/x86_64/primary 93% [=============== ] 2.0 MB/s |  12 MB   00:00 ETA (6/6): epel/x86_64/primary 99% [===============-] 2.0 MB/s |  13 MB   00:00 ETA (6/6): epel/x86_64/primary_db                              | 6.7 MB   00:04     
–ü–∞–∫–µ—Ç–∞ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º [1mncat(B[m –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.
–û—à–∏–±–∫–∞: –í—ã–ø–æ–ª–Ω—è—Ç—å –Ω–µ—á–µ–≥–æ
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# ncat -l -p 80
bash: ncat: –∫–æ–º–∞–Ω–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
]0;root@node2:~[root@node2 ~]# ncat -l -p 80yum install ncat[K[K[K[Knmap-ncat
–ó–∞–≥—Ä—É–∂–µ–Ω—ã –º–æ–¥—É–ª–∏: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirror.reconn.ru
 * epel: ftp.uni-bayreuth.de
 * extras: mirror.reconn.ru
 * updates: dedic.sh
–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
--> –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è
---> –ü–∞–∫–µ—Ç nmap-ncat.x86_64 2:6.40-16.el7 –ø–æ–º–µ—á–µ–Ω –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
--> –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: libpcap.so.1()(64bit) –ø–∞–∫–µ—Ç–∞: 2:nmap-ncat-6.40-16.el7.x86_64
--> –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è
---> –ü–∞–∫–µ—Ç libpcap.x86_64 14:1.5.3-11.el7 –ø–æ–º–µ—á–µ–Ω –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
--> –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ–∫–æ–Ω—á–µ–Ω–∞

–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã

================================================================================
 Package           –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞    –í–µ—Ä—Å–∏—è                     –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π  –†–∞–∑–º–µ—Ä
================================================================================
–£—Å—Ç–∞–Ω–æ–≤–∫–∞:
 nmap-ncat         x86_64         2:6.40-16.el7              base         206 k
–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
 libpcap           x86_64         14:1.5.3-11.el7            base         138 k

–ò—Ç–æ–≥–æ –∑–∞ –æ–ø–µ—Ä–∞—Ü–∏—é
================================================================================
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å  1 –ø–∞–∫–µ—Ç (+1 –∑–∞–≤–∏—Å–∏–º—ã–π)

–û–±—ä–µ–º –∑–∞–≥—Ä—É–∑–∫–∏: 344 k
–û–±—ä–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π: 740 k
Is this ok [y/d/N]: y
Downloading packages:
(1/2): libpcap-1.5.3-11.el7.x86_64.rpm                     | 138 kB   00:00     
(2/2): nmap-ncat-6.40-16.el7.x86_64.rpm                    | 206 kB   00:00     
--------------------------------------------------------------------------------
–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä                                       1.1 MB/s | 344 kB  00:00     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : 14:libpcap-1.5.3-11.el7.x86_ [                            ] 1/2  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : 14:libpcap-1.5.3-11.el7.x86_ [#####                       ] 1/2  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : 14:libpcap-1.5.3-11.el7.x86_ [###########                 ] 1/2  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : 14:libpcap-1.5.3-11.el7.x86_ [################            ] 1/2  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : 14:libpcap-1.5.3-11.el7.x86_ [######################      ] 1/2  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : 14:libpcap-1.5.3-11.el7.x86_ [#########################   ] 1/2  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : 14:libpcap-1.5.3-11.el7.x86_ [##########################  ] 1/2  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : 14:libpcap-1.5.3-11.el7.x86_ [########################### ] 1/2  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : 14:libpcap-1.5.3-11.el7.x86_64                              1/2 
  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : 2:nmap-ncat-6.40-16.el7.x86_ [                            ] 2/2  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : 2:nmap-ncat-6.40-16.el7.x86_ [####                        ] 2/2  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : 2:nmap-ncat-6.40-16.el7.x86_ [########                    ] 2/2  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : 2:nmap-ncat-6.40-16.el7.x86_ [############                ] 2/2  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : 2:nmap-ncat-6.40-16.el7.x86_ [################            ] 2/2  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : 2:nmap-ncat-6.40-16.el7.x86_ [#####################       ] 2/2  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : 2:nmap-ncat-6.40-16.el7.x86_ [########################    ] 2/2  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : 2:nmap-ncat-6.40-16.el7.x86_ [##########################  ] 2/2  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : 2:nmap-ncat-6.40-16.el7.x86_ [########################### ] 2/2  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : 2:nmap-ncat-6.40-16.el7.x86_64                              2/2 
  –ü—Ä–æ–≤–µ—Ä–∫–∞    : 14:libpcap-1.5.3-11.el7.x86_64                              1/2 
  –ü—Ä–æ–≤–µ—Ä–∫–∞    : 2:nmap-ncat-6.40-16.el7.x86_64                              2/2 

–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:
  nmap-ncat.x86_64 2:6.40-16.el7                                                

–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
  libpcap.x86_64 14:1.5.3-11.el7                                                

–í—ã–ø–æ–ª–Ω–µ–Ω–æ!
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# yum install nmap-ncat[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[8Pncat -l -p 80

^C
]0;root@node2:~[root@node2 ~]# su - day
]0;day@node2:~[?1034h[day@node2 ~]$ nmap-ncat^C
]0;day@node2:~[day@node2 ~]$  ncat -l -p 80
Ncat: bind to :::80: Permission denied. QUITTING.
]0;day@node2:~[day@node2 ~]$ logout
]0;root@node2:~[root@node2 ~]# cat >> /etc/security/capability.conf
cap_net_bind_service     day
]0;root@node2:~[root@node2 ~]# vi /etc/pam.d/sshd
[?1049h[?1h=[1;24r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[24;1H"/etc/pam.d/sshd" 21L, 940C[1;1H#%PAM-1.0
auth[7Crequired     pam_sepermit.so
auth[7Csubstack     password-auth
auth[7Cinclude      postlogin
# Used with polkit to reauthorize users in remote sessions
-auth      optional     pam_reauthorize.so prepare
account    required     pam_nologin.so
account    required     pam_time.so
account    include      password-auth
password   include      password-auth
# pam_selinux.so close should be the first session rule
session    required     pam_selinux.so close
session    required     pam_loginuid.so
# pam_selinux.so open should only be followed by sessions to be executed in the  [15;1Huser context
session    required     pam_selinux.so open env_params
session    required     pam_namespace.so
session    optional     pam_keyinit.so force revoke
session    include      password-auth
session    include      postlogin
# Used with polkit to reauthorize users in remote sessions
-session   optional     pam_reauthorize.so prepare
[1m[34m~                                                                               [1;1H[?12l[?25h




















[21;1H[20;1H[msession    include      postlogi[?25l[24;1H[1m-- INSERT --[m[24;13H[K[20;33H[?12l[?25hn[?25l[21;23r[21;1H[L[1;24r[21;1H[?12l[?25h[?25lauth[7Crequired     pam_cap.so[?12l[?25h[24;1H[K[21;34H[?25l[?12l[?25h[?25l


Entering Ex mode.  Type "visual" to go to Normal mode.[?12l[?25h
:wq
[?25l"/etc/pam.d/sshd" "/etc/pam.d/sshd" 22L, 975C written
[?1l>[?12l[?25h[?1049l]0;root@node2:~[root@node2 ~]#  setcap cap_net_bind_service=ei /usr/bin/ncat
]0;root@node2:~[root@node2 ~]# su - day
–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É:–ß—Ç –º–∞–π 16 10:11:27 MSK 2019–Ω–∞ pts/1
]0;day@node2:~[?1034h[day@node2 ~]$ 
]0;day@node2:~[day@node2 ~]$  ncat -l -p 80
Ncat: bind to :::80: Permission denied. QUITTING.
]0;day@node2:~[day@node2 ~]$ 
]0;day@node2:~[day@node2 ~]$ exit
logout
]0;root@node2:~[root@node2 ~]# su - day
–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É:–ß—Ç –º–∞–π 16 10:16:59 MSK 2019–Ω–∞ pts/1
]0;day@node2:~[?1034h[day@node2 ~]$ capsh --printCurrent: = cap_net_bind_service+i
usage: capsh [args ...]
  --help         this message (or try 'man capsh')
  --print        display capability relevant state
  --decode=xxx   decode a hex string to a list of caps
  --supports=xxx exit 1 if capability xxx unsupported
  --drop=xxx     remove xxx,.. capabilities from bset
  --caps=xxx     set caps as per cap_from_text()
  --inh=xxx      set xxx,.. inheritiable set
  --secbits=<n>  write a new value for securebits
  --keep=<n>     set keep-capabability bit to <n>
  --uid=<n>      set uid to <n> (hint: id <username>)
  --gid=<n>      set gid to <n> (hint: id <username>)
  --groups=g,... set the supplemental groups
  --user=<name>  set uid,gid and groups to that of user
  --chroot=path  chroot(2) to this path
  --killit=<n>   send signal(n) to child
  --forkfor=<n>  fork and make child sleep for <n> sec
  ==             re-exec(capsh) with args as for --
  --             remaing arguments are for /bin/bash
                 (without -- [capsh] will simply exit(0))
]0;day@node2:~[day@node2 ~]$ capsh --printCurrent: = cap_net_bind_service+i[1@ 
Current: =
Bounding set =cap_chown,cap_dac_override,cap_dac_read_search,cap_fowner,cap_fsetid,cap_kill,cap_setgid,cap_setuid,cap_setpcap,cap_linux_immutable,cap_net_bind_service,cap_net_broadcast,cap_net_admin,cap_net_raw,cap_ipc_lock,cap_ipc_owner,cap_sys_module,cap_sys_rawio,cap_sys_chroot,cap_sys_ptrace,cap_sys_pacct,cap_sys_admin,cap_sys_boot,cap_sys_nice,cap_sys_resource,cap_sys_time,cap_sys_tty_config,cap_mknod,cap_lease,cap_audit_write,cap_audit_control,cap_setfcap,cap_mac_override,cap_mac_admin,cap_syslog,35,36
Securebits: 00/0x0/1'b0
 secure-noroot: no (unlocked)
 secure-no-suid-fixup: no (unlocked)
 secure-keep-caps: no (unlocked)
uid=1001(day)
gid=1001(day)
groups=1001(day)
usage: capsh [args ...]
  --help         this message (or try 'man capsh')
  --print        display capability relevant state
  --decode=xxx   decode a hex string to a list of caps
  --supports=xxx exit 1 if capability xxx unsupported
  --drop=xxx     remove xxx,.. capabilities from bset
  --caps=xxx     set caps as per cap_from_text()
  --inh=xxx      set xxx,.. inheritiable set
  --secbits=<n>  write a new value for securebits
  --keep=<n>     set keep-capabability bit to <n>
  --uid=<n>      set uid to <n> (hint: id <username>)
  --gid=<n>      set gid to <n> (hint: id <username>)
  --groups=g,... set the supplemental groups
  --user=<name>  set uid,gid and groups to that of user
  --chroot=path  chroot(2) to this path
  --killit=<n>   send signal(n) to child
  --forkfor=<n>  fork and make child sleep for <n> sec
  ==             re-exec(capsh) with args as for --
  --             remaing arguments are for /bin/bash
                 (without -- [capsh] will simply exit(0))
]0;day@node2:~[day@node2 ~]$ 
]0;day@node2:~[day@node2 ~]$ capsh --print Current: = cap_net_bind_service+i +i[C i
Current: =
Bounding set =cap_chown,cap_dac_override,cap_dac_read_search,cap_fowner,cap_fsetid,cap_kill,cap_setgid,cap_setuid,cap_setpcap,cap_linux_immutable,cap_net_bind_service,cap_net_broadcast,cap_net_admin,cap_net_raw,cap_ipc_lock,cap_ipc_owner,cap_sys_module,cap_sys_rawio,cap_sys_chroot,cap_sys_ptrace,cap_sys_pacct,cap_sys_admin,cap_sys_boot,cap_sys_nice,cap_sys_resource,cap_sys_time,cap_sys_tty_config,cap_mknod,cap_lease,cap_audit_write,cap_audit_control,cap_setfcap,cap_mac_override,cap_mac_admin,cap_syslog,35,36
Securebits: 00/0x0/1'b0
 secure-noroot: no (unlocked)
 secure-no-suid-fixup: no (unlocked)
 secure-keep-caps: no (unlocked)
uid=1001(day)
gid=1001(day)
groups=1001(day)
usage: capsh [args ...]
  --help         this message (or try 'man capsh')
  --print        display capability relevant state
  --decode=xxx   decode a hex string to a list of caps
  --supports=xxx exit 1 if capability xxx unsupported
  --drop=xxx     remove xxx,.. capabilities from bset
  --caps=xxx     set caps as per cap_from_text()
  --inh=xxx      set xxx,.. inheritiable set
  --secbits=<n>  write a new value for securebits
  --keep=<n>     set keep-capabability bit to <n>
  --uid=<n>      set uid to <n> (hint: id <username>)
  --gid=<n>      set gid to <n> (hint: id <username>)
  --groups=g,... set the supplemental groups
  --user=<name>  set uid,gid and groups to that of user
  --chroot=path  chroot(2) to this path
  --killit=<n>   send signal(n) to child
  --forkfor=<n>  fork and make child sleep for <n> sec
  ==             re-exec(capsh) with args as for --
  --             remaing arguments are for /bin/bash
                 (without -- [capsh] will simply exit(0))
]0;day@node2:~[day@node2 ~]$ capsh --print Current: = cap_net_bind_service + i[1Pi
Current: =
Bounding set =cap_chown,cap_dac_override,cap_dac_read_search,cap_fowner,cap_fsetid,cap_kill,cap_setgid,cap_setuid,cap_setpcap,cap_linux_immutable,cap_net_bind_service,cap_net_broadcast,cap_net_admin,cap_net_raw,cap_ipc_lock,cap_ipc_owner,cap_sys_module,cap_sys_rawio,cap_sys_chroot,cap_sys_ptrace,cap_sys_pacct,cap_sys_admin,cap_sys_boot,cap_sys_nice,cap_sys_resource,cap_sys_time,cap_sys_tty_config,cap_mknod,cap_lease,cap_audit_write,cap_audit_control,cap_setfcap,cap_mac_override,cap_mac_admin,cap_syslog,35,36
Securebits: 00/0x0/1'b0
 secure-noroot: no (unlocked)
 secure-no-suid-fixup: no (unlocked)
 secure-keep-caps: no (unlocked)
uid=1001(day)
gid=1001(day)
groups=1001(day)
usage: capsh [args ...]
  --help         this message (or try 'man capsh')
  --print        display capability relevant state
  --decode=xxx   decode a hex string to a list of caps
  --supports=xxx exit 1 if capability xxx unsupported
  --drop=xxx     remove xxx,.. capabilities from bset
  --caps=xxx     set caps as per cap_from_text()
  --inh=xxx      set xxx,.. inheritiable set
  --secbits=<n>  write a new value for securebits
  --keep=<n>     set keep-capabability bit to <n>
  --uid=<n>      set uid to <n> (hint: id <username>)
  --gid=<n>      set gid to <n> (hint: id <username>)
  --groups=g,... set the supplemental groups
  --user=<name>  set uid,gid and groups to that of user
  --chroot=path  chroot(2) to this path
  --killit=<n>   send signal(n) to child
  --forkfor=<n>  fork and make child sleep for <n> sec
  ==             re-exec(capsh) with args as for --
  --             remaing arguments are for /bin/bash
                 (without -- [capsh] will simply exit(0))
]0;day@node2:~[day@node2 ~]$ capsh --print Current: = cap_net_bind_service +i[K[K
Current: =
Bounding set =cap_chown,cap_dac_override,cap_dac_read_search,cap_fowner,cap_fsetid,cap_kill,cap_setgid,cap_setuid,cap_setpcap,cap_linux_immutable,cap_net_bind_service,cap_net_broadcast,cap_net_admin,cap_net_raw,cap_ipc_lock,cap_ipc_owner,cap_sys_module,cap_sys_rawio,cap_sys_chroot,cap_sys_ptrace,cap_sys_pacct,cap_sys_admin,cap_sys_boot,cap_sys_nice,cap_sys_resource,cap_sys_time,cap_sys_tty_config,cap_mknod,cap_lease,cap_audit_write,cap_audit_control,cap_setfcap,cap_mac_override,cap_mac_admin,cap_syslog,35,36
Securebits: 00/0x0/1'b0
 secure-noroot: no (unlocked)
 secure-no-suid-fixup: no (unlocked)
 secure-keep-caps: no (unlocked)
uid=1001(day)
gid=1001(day)
groups=1001(day)
usage: capsh [args ...]
  --help         this message (or try 'man capsh')
  --print        display capability relevant state
  --decode=xxx   decode a hex string to a list of caps
  --supports=xxx exit 1 if capability xxx unsupported
  --drop=xxx     remove xxx,.. capabilities from bset
  --caps=xxx     set caps as per cap_from_text()
  --inh=xxx      set xxx,.. inheritiable set
  --secbits=<n>  write a new value for securebits
  --keep=<n>     set keep-capabability bit to <n>
  --uid=<n>      set uid to <n> (hint: id <username>)
  --gid=<n>      set gid to <n> (hint: id <username>)
  --groups=g,... set the supplemental groups
  --user=<name>  set uid,gid and groups to that of user
  --chroot=path  chroot(2) to this path
  --killit=<n>   send signal(n) to child
  --forkfor=<n>  fork and make child sleep for <n> sec
  ==             re-exec(capsh) with args as for --
  --             remaing arguments are for /bin/bash
                 (without -- [capsh] will simply exit(0))
]0;day@node2:~[day@node2 ~]$ capsh --print Current: = cap_net_bind_service [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K
Current: =
Bounding set =cap_chown,cap_dac_override,cap_dac_read_search,cap_fowner,cap_fsetid,cap_kill,cap_setgid,cap_setuid,cap_setpcap,cap_linux_immutable,cap_net_bind_service,cap_net_broadcast,cap_net_admin,cap_net_raw,cap_ipc_lock,cap_ipc_owner,cap_sys_module,cap_sys_rawio,cap_sys_chroot,cap_sys_ptrace,cap_sys_pacct,cap_sys_admin,cap_sys_boot,cap_sys_nice,cap_sys_resource,cap_sys_time,cap_sys_tty_config,cap_mknod,cap_lease,cap_audit_write,cap_audit_control,cap_setfcap,cap_mac_override,cap_mac_admin,cap_syslog,35,36
Securebits: 00/0x0/1'b0
 secure-noroot: no (unlocked)
 secure-no-suid-fixup: no (unlocked)
 secure-keep-caps: no (unlocked)
uid=1001(day)
gid=1001(day)
groups=1001(day)
]0;day@node2:~[day@node2 ~]$ 
]0;day@node2:~[day@node2 ~]$ 
]0;day@node2:~[day@node2 ~]$ 
]0;day@node2:~[day@node2 ~]$ 
]0;day@node2:~[day@node2 ~]$ 
]0;day@node2:~[day@node2 ~]$ 
]0;day@node2:~[day@node2 ~]$ 
]0;day@node2:~[day@node2 ~]$ capsh --print 
Current: =
Bounding set =cap_chown,cap_dac_override,cap_dac_read_search,cap_fowner,cap_fsetid,cap_kill,cap_setgid,cap_setuid,cap_setpcap,cap_linux_immutable,cap_net_bind_service,cap_net_broadcast,cap_net_admin,cap_net_raw,cap_ipc_lock,cap_ipc_owner,cap_sys_module,cap_sys_rawio,cap_sys_chroot,cap_sys_ptrace,cap_sys_pacct,cap_sys_admin,cap_sys_boot,cap_sys_nice,cap_sys_resource,cap_sys_time,cap_sys_tty_config,cap_mknod,cap_lease,cap_audit_write,cap_audit_control,cap_setfcap,cap_mac_override,cap_mac_admin,cap_syslog,35,36
Securebits: 00/0x0/1'b0
 secure-noroot: no (unlocked)
 secure-no-suid-fixup: no (unlocked)
 secure-keep-caps: no (unlocked)
uid=1001(day)
gid=1001(day)
groups=1001(day)
]0;day@node2:~[day@node2 ~]$ logout
]0;root@node2:~[root@node2 ~]# cat /etc/pam.d/sshd 
#%PAM-1.0
auth	   required	pam_sepermit.so
auth       substack     password-auth
auth       include      postlogin
# Used with polkit to reauthorize users in remote sessions
-auth      optional     pam_reauthorize.so prepare
account    required     pam_nologin.so
account    required     pam_time.so
account    include      password-auth
password   include      password-auth
# pam_selinux.so close should be the first session rule
session    required     pam_selinux.so close
session    required     pam_loginuid.so
# pam_selinux.so open should only be followed by sessions to be executed in the user context
session    required     pam_selinux.so open env_params
session    required     pam_namespace.so
session    optional     pam_keyinit.so force revoke
session    include      password-auth
session    include      postlogin
auth       required     pam_cap.so
# Used with polkit to reauthorize users in remote sessions
-session   optional     pam_reauthorize.so prepare
]0;root@node2:~[root@node2 ~]# cat /etc/pam.d/sshd [1P[1P[1P[1@v[1@i
[?1049h[?1h=[1;24r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[24;1H"/etc/pam.d/sshd" 22L, 975C[1;1H#%PAM-1.0
auth[7Crequired     pam_sepermit.so
auth[7Csubstack     password-auth
auth[7Cinclude      postlogin
# Used with polkit to reauthorize users in remote sessions
-auth      optional     pam_reauthorize.so prepare
account    required     pam_nologin.so
account    required     pam_time.so
account    include      password-auth
password   include      password-auth
# pam_selinux.so close should be the first session rule
session    required     pam_selinux.so close
session    required     pam_loginuid.so
# pam_selinux.so open should only be followed by sessions to be executed in the  [15;1Huser context
session    required     pam_selinux.so open env_params
session    required     pam_namespace.so
session    optional     pam_keyinit.so force revoke
session    include      password-auth
session    include      postlogin
auth[7Crequired     pam_cap.so
# Used with polkit to reauthorize users in remote sessions
-session   optional     pam_reauthorize.so prepare[1;1H[?12l[?25h[?25l[24;1H[1m-- INSERT --[m[24;13H[K[1;1H[?12l[?25h




[5;1H[?25l[6;23r[6;1H[L[1;24r[5;1H[K[6;1H# Used with polkit to reauthorize users in remote sessions[?12l[?25h[5;1H[?25lauth[7Crequired     pam_cap.so[?12l[?25h[?25l<F2>[?12l[?25h[?25l[6;23r[6;1H[L[1;24r[6;1H[?12l[?25h[?25l[5;23r[23;1H
[1;24r[5;1Hauth[7Crequired     pam_cap.so<F2>[23;1H# Used with polkit to reauthorize users in remote sessions[5;39H[?12l[?25h[?25l[5;38H[K[5;38H[?12l[?25h[?25l[5;37H[K[5;37H[?12l[?25h[?25l[5;36H[K[5;36H[?12l[?25h[?25l[5;35H[K[5;35H[?12l[?25h[24;1H[K[5;34H[?25l[?12l[?25h[?25l[24;1HEntering Ex mode.  Type "visual" to go to Normal mode.[?12l[?25h
:wq
[?25l"/etc/pam.d/sshd" "/etc/pam.d/sshd" 23L, 1010C written
[?1l>[?12l[?25h[?1049l]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# sy[Ku - day
–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É:–ß—Ç –º–∞–π 16 10:18:44 MSK 2019—Å afidelina.dlink–Ω–∞ pts/2
]0;day@node2:~[?1034h[day@node2 ~]$ capsh --print
Current: =
Bounding set =cap_chown,cap_dac_override,cap_dac_read_search,cap_fowner,cap_fsetid,cap_kill,cap_setgid,cap_setuid,cap_setpcap,cap_linux_immutable,cap_net_bind_service,cap_net_broadcast,cap_net_admin,cap_net_raw,cap_ipc_lock,cap_ipc_owner,cap_sys_module,cap_sys_rawio,cap_sys_chroot,cap_sys_ptrace,cap_sys_pacct,cap_sys_admin,cap_sys_boot,cap_sys_nice,cap_sys_resource,cap_sys_time,cap_sys_tty_config,cap_mknod,cap_lease,cap_audit_write,cap_audit_control,cap_setfcap,cap_mac_override,cap_mac_admin,cap_syslog,35,36
Securebits: 00/0x0/1'b0
 secure-noroot: no (unlocked)
 secure-no-suid-fixup: no (unlocked)
 secure-keep-caps: no (unlocked)
uid=1001(day)
gid=1001(day)
groups=1001(day)
]0;day@node2:~[day@node2 ~]$ logout
]0;root@node2:~[root@node2 ~]# cat /etc/security/capability.conf
cap_net_bind_service     day
]0;root@node2:~[root@node2 ~]# setcap cap_net_bind_service=ei /usr/bin/ncat
]0;root@node2:~[root@node2 ~]# systemctl restart pamd
Failed to restart pamd.service: Unit not found.
]0;root@node2:~[root@node2 ~]# systemctl restart pamd[K[K[K[K[K[K[K[K[K[K[K[K| grep pam
]0;root@node2:~[root@node2 ~]# for pkg in epel-release pam_script; do yum install -y $pkg; don
> e
> 
> ^C
]0;root@node2:~[root@node2 ~]# for pkg in epel-release pam_script; do yum install -y $pkg; don;  e; [1P[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Ce;[1P [A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C

–ó–∞–≥—Ä—É–∂–µ–Ω—ã –º–æ–¥—É–ª–∏: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirror.reconn.ru
 * epel: ftp.uni-bayreuth.de
 * extras: mirror.reconn.ru
 * updates: dedic.sh
–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
--> –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è
---> –ü–∞–∫–µ—Ç epel-release.noarch 0:7-11 –ø–æ–º–µ—á–µ–Ω –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
--> –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ–∫–æ–Ω—á–µ–Ω–∞

–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã

================================================================================
 Package                –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞      –í–µ—Ä—Å–∏—è            –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π    –†–∞–∑–º–µ—Ä
================================================================================
–£—Å—Ç–∞–Ω–æ–≤–∫–∞:
 epel-release           noarch           7-11              epel            15 k

–ò—Ç–æ–≥–æ –∑–∞ –æ–ø–µ—Ä–∞—Ü–∏—é
================================================================================
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å  1 –ø–∞–∫–µ—Ç

–û–±—ä–µ–º –∑–∞–≥—Ä—É–∑–∫–∏: 15 k
–û–±—ä–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π: 24 k
Downloading packages:
epel-release-7-11.noarch.rpm                               |  15 kB   00:00     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : epel-release-7-11.noarch [                                ] 1/1  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : epel-release-7-11.noarch [##                              ] 1/1  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : epel-release-7-11.noarch [###                             ] 1/1  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : epel-release-7-11.noarch [####                            ] 1/1  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : epel-release-7-11.noarch [########                        ] 1/1  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : epel-release-7-11.noarch [############################### ] 1/1  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : epel-release-7-11.noarch                                    1/1 
  –ü—Ä–æ–≤–µ—Ä–∫–∞    : epel-release-7-11.noarch                                    1/1 

–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:
  epel-release.noarch 0:7-11                                                    

–í—ã–ø–æ–ª–Ω–µ–Ω–æ!
–ó–∞–≥—Ä—É–∂–µ–Ω—ã –º–æ–¥—É–ª–∏: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirror.reconn.ru
 * epel: ftp.uni-bayreuth.de
 * extras: mirror.reconn.ru
 * updates: dedic.sh
–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
--> –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è
---> –ü–∞–∫–µ—Ç pam_script.x86_64 0:1.1.8-1.el7 –ø–æ–º–µ—á–µ–Ω –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
--> –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ–∫–æ–Ω—á–µ–Ω–∞

–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã

================================================================================
 Package             –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞     –í–µ—Ä—Å–∏—è                 –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π   –†–∞–∑–º–µ—Ä
================================================================================
–£—Å—Ç–∞–Ω–æ–≤–∫–∞:
 pam_script          x86_64          1.1.8-1.el7            epel           28 k

–ò—Ç–æ–≥–æ –∑–∞ –æ–ø–µ—Ä–∞—Ü–∏—é
================================================================================
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å  1 –ø–∞–∫–µ—Ç

–û–±—ä–µ–º –∑–∞–≥—Ä—É–∑–∫–∏: 28 k
–û–±—ä–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π: 62 k
Downloading packages:
pam_script-1.1.8-1.el7.x86_64.rpm                          |  28 kB   00:00     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : pam_script-1.1.8-1.el7.x86_6 [                            ] 1/1  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : pam_script-1.1.8-1.el7.x86_6 [#                           ] 1/1  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : pam_script-1.1.8-1.el7.x86_6 [########                    ] 1/1  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : pam_script-1.1.8-1.el7.x86_6 [################            ] 1/1  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : pam_script-1.1.8-1.el7.x86_6 [#######################     ] 1/1  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : pam_script-1.1.8-1.el7.x86_6 [########################    ] 1/1  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : pam_script-1.1.8-1.el7.x86_6 [#########################   ] 1/1  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : pam_script-1.1.8-1.el7.x86_6 [########################### ] 1/1  –£—Å—Ç–∞–Ω–æ–≤–∫–∞   : pam_script-1.1.8-1.el7.x86_64                               1/1 
  –ü—Ä–æ–≤–µ—Ä–∫–∞    : pam_script-1.1.8-1.el7.x86_64                               1/1 

–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:
  pam_script.x86_64 0:1.1.8-1.el7                                               

–í—ã–ø–æ–ª–Ω–µ–Ω–æ!
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# cat /etc/pam.d/sshd
#%PAM-1.0
auth	   required	pam_sepermit.so
auth       substack     password-auth
auth       include      postlogin
auth       required     pam_cap.so
# Used with polkit to reauthorize users in remote sessions
-auth      optional     pam_reauthorize.so prepare
account    required     pam_nologin.so
account    required     pam_time.so
account    include      password-auth
password   include      password-auth
# pam_selinux.so close should be the first session rule
session    required     pam_selinux.so close
session    required     pam_loginuid.so
# pam_selinux.so open should only be followed by sessions to be executed in the user context
session    required     pam_selinux.so open env_params
session    required     pam_namespace.so
session    optional     pam_keyinit.so force revoke
session    include      password-auth
session    include      postlogin
auth       required     pam_cap.so
# Used with polkit to reauthorize users in remote sessions
-session   optional     pam_reauthorize.so prepare
]0;root@node2:~[root@node2 ~]# vcat /etc/pam.d/sshd[1P /etc/pam.d/sshd[1P /etc/pam.d/sshd[1P /etc/pam.d/sshdv /etc/pam.d/sshdi /etc/pam.d/sshd
[?1049h[?1h=[1;24r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[24;1H"/etc/pam.d/sshd" 23L, 1010C[1;1H#%PAM-1.0
auth[7Crequired     pam_sepermit.so
auth[7Csubstack     password-auth
auth[7Cinclude      postlogin
auth[7Crequired     pam_cap.so
# Used with polkit to reauthorize users in remote sessions
-auth      optional     pam_reauthorize.so prepare
account    required     pam_nologin.so
account    required     pam_time.so
account    include      password-auth
password   include      password-auth
# pam_selinux.so close should be the first session rule
session    required     pam_selinux.so close
session    required     pam_loginuid.so
# pam_selinux.so open should only be followed by sessions to be executed in the  [16;1Huser context
session    required     pam_selinux.so open env_params
session    required     pam_namespace.so
session    optional     pam_keyinit.so force revoke
session    include      password-auth
session    include      postlogin
auth[7Crequired     pam_cap.so
# Used with polkit to reauthorize users in remote sessions[1;1H[?12l[?25h





















[22;1H[?25l# Used with polkit to reauthorize users in remote sessions
-session   optional     pam_reauthorize.so prepare[23;51H[K[22;1H[?12l[?25h[21;1H[20;1H[19;1H[18;1H[17;1H[15;1H[14;1H[13;1H[12;1H[11;1H[10;1H[9;1H[8;1H[7;1H[6;1H[5;1H[4;1H[3;1H[2;1H[1;1H









[?25l[11;23r[23;1H
[1;24r[23;1H[1m[34m~                                                                               [m[24;1H[K[11;1H[?12l[?25h[?25l[24;1HEntering Ex mode.  Type "visual" to go to Normal mode.[?12l[?25h
:wq
[?25l"/etc/pam.d/sshd" "/etc/pam.d/sshd" 21L, 937C written
[?1l>[?12l[?25h[?1049l]0;root@node2:~[root@node2 ~]# cat /etc/security/capability.con
cat: /etc/security/capability.con: –ù–µ—Ç —Ç–∞–∫–æ–≥–æ —Ñ–∞–π–ª–∞ –∏–ª–∏ –∫–∞—Ç–∞–ª–æ–≥–∞
]0;root@node2:~[root@node2 ~]# cat /etc/security/capability.conf 
cap_net_bind_service     day
]0;root@node2:~[root@node2 ~]# setcap cap_net_bind_service=ei /usr/bin/ncat
]0;root@node2:~[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# capsh --print
Current: = cap_chown,cap_dac_override,cap_dac_read_search,cap_fowner,cap_fsetid,cap_kill,cap_setgid,cap_setuid,cap_setpcap,cap_linux_immutable,cap_net_bind_service,cap_net_broadcast,cap_net_admin,cap_net_raw,cap_ipc_lock,cap_ipc_owner,cap_sys_module,cap_sys_rawio,cap_sys_chroot,cap_sys_ptrace,cap_sys_pacct,cap_sys_admin,cap_sys_boot,cap_sys_nice,cap_sys_resource,cap_sys_time,cap_sys_tty_config,cap_mknod,cap_lease,cap_audit_write,cap_audit_control,cap_setfcap,cap_mac_override,cap_mac_admin,cap_syslog,35,36+ep
Bounding set =cap_chown,cap_dac_override,cap_dac_read_search,cap_fowner,cap_fsetid,cap_kill,cap_setgid,cap_setuid,cap_setpcap,cap_linux_immutable,cap_net_bind_service,cap_net_broadcast,cap_net_admin,cap_net_raw,cap_ipc_lock,cap_ipc_owner,cap_sys_module,cap_sys_rawio,cap_sys_chroot,cap_sys_ptrace,cap_sys_pacct,cap_sys_admin,cap_sys_boot,cap_sys_nice,cap_sys_resource,cap_sys_time,cap_sys_tty_config,cap_mknod,cap_lease,cap_audit_write,cap_audit_control,cap_setfcap,cap_mac_override,cap_mac_admin,cap_syslog,35,36
Securebits: 00/0x0/1'b0
 secure-noroot: no (unlocked)
 secure-no-suid-fixup: no (unlocked)
 secure-keep-caps: no (unlocked)
uid=0(root)
gid=0(root)
groups=0(root)
]0;root@node2:~[root@node2 ~]# su - day
–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É:–ß—Ç –º–∞–π 16 10:20:38 MSK 2019–Ω–∞ pts/1
]0;day@node2:~[?1034h[day@node2 ~]$ capsh --print
Current: =
Bounding set =cap_chown,cap_dac_override,cap_dac_read_search,cap_fowner,cap_fsetid,cap_kill,cap_setgid,cap_setuid,cap_setpcap,cap_linux_immutable,cap_net_bind_service,cap_net_broadcast,cap_net_admin,cap_net_raw,cap_ipc_lock,cap_ipc_owner,cap_sys_module,cap_sys_rawio,cap_sys_chroot,cap_sys_ptrace,cap_sys_pacct,cap_sys_admin,cap_sys_boot,cap_sys_nice,cap_sys_resource,cap_sys_time,cap_sys_tty_config,cap_mknod,cap_lease,cap_audit_write,cap_audit_control,cap_setfcap,cap_mac_override,cap_mac_admin,cap_syslog,35,36
Securebits: 00/0x0/1'b0
 secure-noroot: no (unlocked)
 secure-no-suid-fixup: no (unlocked)
 secure-keep-caps: no (unlocked)
uid=1001(day)
gid=1001(day)
groups=1001(day)
]0;day@node2:~[day@node2 ~]$ logout
]0;root@node2:~[root@node2 ~]# usermod -G wheel day
]0;root@node2:~[root@node2 ~]# su - day
–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É:–ß—Ç –º–∞–π 16 10:25:49 MSK 2019–Ω–∞ pts/1
]0;day@node2:~[?1034h[day@node2 ~]$ sudo -i

–ú—ã –ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ –≤–∞—à —Å–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∏–∑–ª–æ–∂–∏–ª –≤–∞–º –æ—Å–Ω–æ–≤—ã
–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –≤—Å—ë —Å–≤–æ–¥–∏—Ç—Å—è –∫ —Ç—Ä—ë–º —Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–∞–≤–∏–ª–∞–º:

    ‚Ññ1) –£–≤–∞–∂–∞–π—Ç–µ —á–∞—Å—Ç–Ω—É—é –∂–∏–∑–Ω—å –¥—Ä—É–≥–∏—Ö.
    ‚Ññ2) –î—É–º–∞–π—Ç–µ, –ø—Ä–µ–∂–¥–µ —á—Ç–æ-—Ç–æ –≤–≤–æ–¥–∏—Ç—å.
    ‚Ññ3) –° –±–æ–ª—å—à–æ–π –≤–ª–∞—Å—Ç—å—é –ø—Ä–∏—Ö–æ–¥–∏—Ç –±–æ–ª—å—à–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å.

[sudo] –ø–∞—Ä–æ–ª—å –¥–ª—è day: 
]0;root@node2:~[?1034h[root@node2 ~]# 
]0;root@node2:~[root@node2 ~]# capsh --print
Current: = cap_chown,cap_dac_override,cap_dac_read_search,cap_fowner,cap_fsetid,cap_kill,cap_setgid,cap_setuid,cap_setpcap,cap_linux_immutable,cap_net_bind_service,cap_net_broadcast,cap_net_admin,cap_net_raw,cap_ipc_lock,cap_ipc_owner,cap_sys_module,cap_sys_rawio,cap_sys_chroot,cap_sys_ptrace,cap_sys_pacct,cap_sys_admin,cap_sys_boot,cap_sys_nice,cap_sys_resource,cap_sys_time,cap_sys_tty_config,cap_mknod,cap_lease,cap_audit_write,cap_audit_control,cap_setfcap,cap_mac_override,cap_mac_admin,cap_syslog,35,36+ep
Bounding set =cap_chown,cap_dac_override,cap_dac_read_search,cap_fowner,cap_fsetid,cap_kill,cap_setgid,cap_setuid,cap_setpcap,cap_linux_immutable,cap_net_bind_service,cap_net_broadcast,cap_net_admin,cap_net_raw,cap_ipc_lock,cap_ipc_owner,cap_sys_module,cap_sys_rawio,cap_sys_chroot,cap_sys_ptrace,cap_sys_pacct,cap_sys_admin,cap_sys_boot,cap_sys_nice,cap_sys_resource,cap_sys_time,cap_sys_tty_config,cap_mknod,cap_lease,cap_audit_write,cap_audit_control,cap_setfcap,cap_mac_override,cap_mac_admin,cap_syslog,35,36
Securebits: 00/0x0/1'b0
 secure-noroot: no (unlocked)
 secure-no-suid-fixup: no (unlocked)
 secure-keep-caps: no (unlocked)
uid=0(root)
gid=0(root)
groups=0(root)
]0;root@node2:~[root@node2 ~]# ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: enp0s3: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 08:00:27:e8:9c:4f brd ff:ff:ff:ff:ff:ff
    inet 10.32.200.5/24 brd 10.32.200.255 scope global noprefixroute dynamic enp0s3
  